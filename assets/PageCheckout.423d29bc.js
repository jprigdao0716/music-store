import{a as F,Q as f}from"./QInput.e669dcfc.js";import{Q as A,a as U,b as j,c as O,d as E}from"./QItemLabel.ab617438.js";import{a as R}from"./QBtn.e96c6d1d.js";import{c as z,r as N,p as L,P as T,Q as K,f as M,h as W,g as G,J as w,A as J,M as Y,q as Z,z as X,s as b,t as B,u as s,v as r,_ as H,W as $,X as ee,Y as te,x as V,Z as y,U as ae,V as oe,y as S}from"./index.76c2a997.js";import{a as ne,v as re}from"./use-router-link.3e8e2949.js";import{Q as le,a as ie}from"./QCard.948ba5c4.js";import{Q as se}from"./QPage.6857a7bc.js";import{_ as ue}from"./plugin-vue_export-helper.72c2f8e0.js";var de=z({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(a,{slots:n,emit:c}){const h=G(),o=N(null);let p=0;const u=[];function t(e){const m=typeof e=="boolean"?e:a.noErrorFocus!==!0,g=++p,I=(l,i)=>{c(`validation${l===!0?"Success":"Error"}`,i)},q=l=>{const i=l.validate();return typeof i.then=="function"?i.then(d=>({valid:d,comp:l}),d=>({valid:!1,comp:l,err:d})):Promise.resolve({valid:i,comp:l})};return(a.greedy===!0?Promise.all(u.map(q)).then(l=>l.filter(i=>i.valid!==!0)):u.reduce((l,i)=>l.then(()=>q(i).then(d=>{if(d.valid===!1)return Promise.reject(d)})),Promise.resolve()).catch(l=>[l])).then(l=>{if(l===void 0||l.length===0)return g===p&&I(!0),!0;if(g===p){const{comp:i,err:d}=l[0];if(d!==void 0&&console.error(d),I(!1,i),m===!0){const Q=l.find(({comp:k})=>typeof k.focus=="function"&&re(k.$)===!1);Q!==void 0&&Q.comp.focus()}}return!1})}function x(){p++,u.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function D(e){e!==void 0&&w(e);const m=p+1;t().then(g=>{m===p&&g===!0&&(a.onSubmit!==void 0?c("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function C(e){e!==void 0&&w(e),c("reset"),J(()=>{x(),a.autofocus===!0&&a.noResetFocus!==!0&&v()})}function v(){F(()=>{if(o.value===null)return;const e=o.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(o.value.querySelectorAll("[tabindex]"),m=>m.tabIndex!==-1);e!=null&&e.focus({preventScroll:!0})})}L(Y,{bindComponent(e){u.push(e)},unbindComponent(e){const m=u.indexOf(e);m!==-1&&u.splice(m,1)}});let P=!1;return T(()=>{P=!0}),K(()=>{P===!0&&a.autofocus===!0&&v()}),M(()=>{a.autofocus===!0&&v()}),Object.assign(h.proxy,{validate:t,resetValidation:x,submit:D,reset:C,focus:v,getValidationComponents:()=>u}),()=>W("form",{class:"q-form",ref:o,onSubmit:D,onReset:C},ne(n.default))}});const ce={data(){return{shippingDetails:{name:"",email:"",address:"",city:"",state:"",zip:"",country:""}}},computed:{...Z(["cartItems","totalAmount"])},methods:{async handleCheckout(){if(!this.isValidShippingDetails()){alert("Please fill out all required fields.");return}localStorage.setItem("checkoutInfo",JSON.stringify({amount:this.totalAmount,shippingDetails:this.shippingDetails,cartItems:this.cartItems})),this.$router.push("/order-confirmation")},isValidShippingDetails(){return Object.values(this.shippingDetails).every(a=>a.trim()!=="")}},mounted(){const a=document.createElement("script");a.src="https://www.paypal.com/sdk/js?client-id=AWzA6dyaY2Iji7bVblUkl4ijRj_hIiivn57Rhseab0sxxe1Bsx3k-GPKxdKWPpiSLaCujsvnmVTby9Ae",a.async=!0,a.onload=()=>{window.paypal&&window.paypal.Buttons({createOrder:(n,c)=>c.order.create({purchase_units:[{amount:{value:this.totalAmount.toFixed(2)}}]}),onApprove:async(n,c)=>{try{await c.order.capture(),alert("Payment successful!")}catch(h){console.error("Error capturing payment:",h),alert("Payment capture failed. Please try again.")}},onError:n=>{console.error("PayPal Checkout error:",n),alert("Payment failed. Please try again.")}}).render("#paypal-button-container")},document.body.appendChild(a)}},_=a=>(ae("data-v-61602c4c"),a=a(),oe(),a),pe=_(()=>S("h4",null,"Checkout",-1)),me=_(()=>S("h6",null,"Order Summary",-1)),fe=_(()=>S("div",{id:"paypal-button-container",class:"paypal-button-container"},null,-1));function ye(a,n,c,h,o,p){const u=X("q-container");return b(),B(se,{class:"checkout-page"},{default:s(()=>[r(u,null,{default:s(()=>[r(le,null,{default:s(()=>[r(ie,null,{default:s(()=>[pe,r(de,{onSubmit:H(p.handleCheckout,["prevent"])},{default:s(()=>[r(f,{modelValue:o.shippingDetails.name,"onUpdate:modelValue":n[0]||(n[0]=t=>o.shippingDetails.name=t),label:"Name",required:""},null,8,["modelValue"]),r(f,{modelValue:o.shippingDetails.email,"onUpdate:modelValue":n[1]||(n[1]=t=>o.shippingDetails.email=t),label:"Email",type:"email",required:""},null,8,["modelValue"]),r(f,{modelValue:o.shippingDetails.address,"onUpdate:modelValue":n[2]||(n[2]=t=>o.shippingDetails.address=t),label:"Address",required:""},null,8,["modelValue"]),r(f,{modelValue:o.shippingDetails.city,"onUpdate:modelValue":n[3]||(n[3]=t=>o.shippingDetails.city=t),label:"City",required:""},null,8,["modelValue"]),r(f,{modelValue:o.shippingDetails.state,"onUpdate:modelValue":n[4]||(n[4]=t=>o.shippingDetails.state=t),label:"State",required:""},null,8,["modelValue"]),r(f,{modelValue:o.shippingDetails.zip,"onUpdate:modelValue":n[5]||(n[5]=t=>o.shippingDetails.zip=t),label:"Zip Code",required:""},null,8,["modelValue"]),r(f,{modelValue:o.shippingDetails.country,"onUpdate:modelValue":n[6]||(n[6]=t=>o.shippingDetails.country=t),label:"Country",required:""},null,8,["modelValue"]),r(A),me,r(U,null,{default:s(()=>[(b(!0),$(te,null,ee(a.cartItems,t=>(b(),B(O,{key:t.id},{default:s(()=>[r(E,null,{default:s(()=>[V(y(t.name)+" - "+y(t.quantity)+" x $"+y(t.price),1)]),_:2},1024),r(E,null,{default:s(()=>[V(" $"+y(t.quantity*t.price),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),r(A),r(j,null,{default:s(()=>[V("Total: $"+y(a.totalAmount),1)]),_:1}),r(R,{type:"submit",color:"primary",label:"Place Order"})]),_:1},8,["onSubmit"]),fe]),_:1})]),_:1})]),_:1})]),_:1})}var Ce=ue(ce,[["render",ye],["__scopeId","data-v-61602c4c"]]);export{Ce as default};
